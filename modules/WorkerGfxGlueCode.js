"use strict";var gfxBuffers=null,gfxCounters=null;function iodineGBAWorkerGfxShim(){this.gfx=null,gfxBuffers=[getSharedUint8Array(115200),getSharedUint8Array(115200)],gfxCounters=getSharedInt32Array(3),this.Iodine=new GameBoyAdvanceEmulator}iodineGBAWorkerGfxShim.prototype.play=function(){this.Iodine.play()},iodineGBAWorkerGfxShim.prototype.pause=function(){this.Iodine.pause()},iodineGBAWorkerGfxShim.prototype.restart=function(){this.Iodine.restart()},iodineGBAWorkerGfxShim.prototype.setIntervalRate=function(e){e=+e,this.Iodine.setIntervalRate(+e)},iodineGBAWorkerGfxShim.prototype.timerCallback=function(e){e>>>=0,this.Iodine.timerCallback(e)},iodineGBAWorkerGfxShim.prototype.attachGraphicsFrameHandler=function(e){this.gfx=e;var t=this;this.gfx.attachGfxCallback((function(){t.graphicsHeartBeat()})),this.Iodine.attachGraphicsFrameHandler(e)},iodineGBAWorkerGfxShim.prototype.attachAudioHandler=function(e){this.Iodine.attachAudioHandler(e)},iodineGBAWorkerGfxShim.prototype.enableAudio=function(){this.Iodine.enableAudio()},iodineGBAWorkerGfxShim.prototype.disableAudio=function(){this.Iodine.disableAudio()},iodineGBAWorkerGfxShim.prototype.toggleSkipBootROM=function(e){e|=0,this.Iodine.toggleSkipBootROM(0|e)},iodineGBAWorkerGfxShim.prototype.toggleDynamicSpeed=function(e){e|=0,this.Iodine.toggleDynamicSpeed(0|e)},iodineGBAWorkerGfxShim.prototype.toggleOffthreadGraphics=function(e){e|=0,this.Iodine.toggleOffthreadGraphics(0|e)},iodineGBAWorkerGfxShim.prototype.attachSpeedHandler=function(e){this.Iodine.attachSpeedHandler(e)},iodineGBAWorkerGfxShim.prototype.attachPlayStatusHandler=function(e){this.Iodine.attachPlayStatusHandler(e)},iodineGBAWorkerGfxShim.prototype.keyDown=function(e){e|=0,this.Iodine.keyDown(0|e)},iodineGBAWorkerGfxShim.prototype.keyUp=function(e){e|=0,this.Iodine.keyUp(0|e)},iodineGBAWorkerGfxShim.prototype.incrementSpeed=function(e){e=+e,this.Iodine.incrementSpeed(+e)},iodineGBAWorkerGfxShim.prototype.setSpeed=function(e){e=+e,this.Iodine.setSpeed(+e)},iodineGBAWorkerGfxShim.prototype.attachBIOS=function(e){this.Iodine.attachBIOS(e)},iodineGBAWorkerGfxShim.prototype.attachROM=function(e){this.Iodine.attachROM(e)},iodineGBAWorkerGfxShim.prototype.exportSave=function(){this.Iodine.exportSave()},iodineGBAWorkerGfxShim.prototype.attachSaveExportHandler=function(e){this.Iodine.attachSaveExportHandler(e)},iodineGBAWorkerGfxShim.prototype.attachSaveImportHandler=function(e){this.Iodine.attachSaveImportHandler(e)},iodineGBAWorkerGfxShim.prototype.graphicsHeartBeat=function(){this.gfx&&gfxCounters&&(this.consumeGraphicsBuffer(),Atomics.notify(gfxCounters,2,1))},iodineGBAWorkerGfxShim.prototype.consumeGraphicsBuffer=function(){var e=0|gfxCounters[0],t=0|Atomics.load(gfxCounters,1);if((0|t)!=(0|e)){do{this.gfx.copyBuffer(gfxBuffers[1&e]),e=1+(0|e)|0}while((0|e)!=(0|t));gfxCounters[0]=0|t}};